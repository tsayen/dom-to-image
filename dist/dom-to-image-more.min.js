/*! dom-to-image-more 01-02-2023 */
!function(u){"use strict";const f=function(){let t=0;return{escape:function(t){return t.replace(/([.*+?^${}()|[]\/\\])/g,"\\$1")},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(e){if(e.toBlob)return new Promise(function(t){e.toBlob(t)});return function(r){return new Promise(function(t){var e=c(r.toDataURL().split(",")[1]),n=e.length,o=new Uint8Array(n);for(let t=0;t<n;t++)o[t]=e.charCodeAt(t);t(new Blob([o],{type:"image/png"}))})}(e)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),o=n.createElement("base"),r=(n.head.appendChild(o),n.createElement("a"));return n.body.appendChild(r),o.href=e,r.href=t,r.href},getAndEncode:function(u){let t=l.impl.urlCache.find(function(t){return t.url===u});t||(t={url:u,promise:null},l.impl.urlCache.push(t));null===t.promise&&(l.impl.options.cacheBust&&(u+=(/\?/.test(u)?"&":"?")+(new Date).getTime()),t.promise=new Promise(function(e){const t=l.impl.options.httpTimeout,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(200!==n.status)o?e(o):i(`cannot fetch resource: ${u}, status: `+n.status);else{const t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n.response)}},n.ontimeout=function(){o?e(o):i(`timeout of ${t}ms occured while fetching resource: `+u)},n.responseType="blob",n.timeout=t,l.impl.options.useCredentials&&(n.withCredentials=!0),n.open("GET",u,!0),n.send();let o;var r;function i(t){console.error(t),e("")}l.impl.options.imagePlaceholder&&(r=l.impl.options.imagePlaceholder.split(/,/))&&r[1]&&(o=r[1])}));return t.promise},uid:function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++},delay:function(n){return function(e){return new Promise(function(t){setTimeout(function(){t(e)},n)})}},asArray:function(e){var n=[],o=e.length;for(let t=0;t<o;t++)n.push(e[t]);return n},escapeXhtml:function(t){return t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(o){return"data:,"!==o?new Promise(function(t,e){const n=new Image;l.impl.options.useCredentials&&(n.crossOrigin="use-credentials"),n.onload=function(){t(n)},n.onerror=e,n.src=o}):Promise.resolve()},width:function(t){var e=i(t,"width");{var n,o;isNaN(e)&&(n=i(t,"border-left-width"),o=i(t,"border-right-width"),e=t.scrollWidth+n+o)}return e},height:function(t){var e=i(t,"height");{var n,o;isNaN(e)&&(n=i(t,"border-top-width"),o=i(t,"border-bottom-width"),e=t.scrollHeight+n+o)}return e},getWindow:e,isElement:r,isElementHostForOpenShadowRoot:function(t){return r(t)&&null!==t.shadowRoot},isShadowRoot:n,isInShadowRoot:o,isHTMLElement:function(t){return t instanceof e(t).HTMLElement},isHTMLCanvasElement:function(t){return t instanceof e(t).HTMLCanvasElement},isHTMLInputElement:function(t){return t instanceof e(t).HTMLInputElement},isHTMLImageElement:function(t){return t instanceof e(t).HTMLImageElement},isHTMLLinkElement:function(t){return t instanceof e(t).HTMLLinkElement},isHTMLScriptElement:function(t){return t instanceof e(t).HTMLScriptElement},isHTMLStyleElement:function(t){return t instanceof e(t).HTMLStyleElement},isHTMLTextAreaElement:function(t){return t instanceof e(t).HTMLTextAreaElement},isShadowSlotElement:function(t){return o(t)&&t instanceof e(t).HTMLSlotElement},isSVGElement:function(t){return t instanceof e(t).SVGElement},isSVGRectElement:function(t){return t instanceof e(t).SVGRectElement}};function e(t){t=t?t.ownerDocument:void 0;return(t?t.defaultView:void 0)||u||window}function n(t){return t instanceof e(t).ShadowRoot}function o(t){return null!==t&&Object.prototype.hasOwnProperty.call(t,"getRootNode")&&n(t.getRootNode())}function r(t){return t instanceof e(t).Element}function i(t,e){let n=h(t).getPropertyValue(e);return"px"!==n.slice(-2)?NaN:(n=n.slice(0,-2),parseFloat(n))}}(),r=function(){const o=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(e,o,r){if(!t(e))return Promise.resolve(e);return Promise.resolve(e).then(n).then(function(t){let n=Promise.resolve(e);return t.forEach(function(e){n=n.then(function(t){return i(t,e,o,r)})}),n})},shouldProcess:t,impl:{readUrls:n,inline:i}};function t(t){return-1!==t.search(o)}function n(t){for(var e,n=[];null!==(e=o.exec(t));)n.push(e[1]);return n.filter(function(t){return!f.isDataUrl(t)})}function i(n,o,e,t){return Promise.resolve(o).then(function(t){return e?f.resolveUrl(t,e):t}).then(t||f.getAndEncode).then(function(t){return n.replace((e=o,new RegExp(`(url\\(['"]?)(${f.escape(e)})(['"]?\\))`,"g")),`$1${t}$3`);var e})}}(),t={resolveAll:function(){return e().then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join("\n")})},impl:{readAll:e}};function e(){return Promise.resolve(f.asArray(document.styleSheets)).then(function(t){const n=[];return t.forEach(function(e){if(Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(e),"cssRules"))try{f.asArray(e.cssRules||[]).forEach(n.push.bind(n))}catch(t){console.error("domtoimage: Error while reading CSS rules from "+e.href,t.toString())}}),n}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return r.shouldProcess(t.style.getPropertyValue("src"))})}).then(function(t){return t.map(e)});function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return r.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}}const n={inlineAll:function e(t){if(!f.isElement(t))return Promise.resolve(t);return n(t).then(function(){return f.isHTMLImageElement(t)?o(t).inline():Promise.all(f.asArray(t.childNodes).map(function(t){return e(t)}))});function n(o){const t=["background","background-image"],e=t.map(function(e){const t=o.style.getPropertyValue(e),n=o.style.getPropertyPriority(e);return t?r.inlineAll(t).then(function(t){o.style.setProperty(e,t,n)}):Promise.resolve()});return Promise.all(e).then(function(){return o})}},impl:{newImage:o}};function o(n){return{inline:function(t){if(f.isDataUrl(n.src))return Promise.resolve();return Promise.resolve(n.src).then(t||f.getAndEncode).then(function(e){return new Promise(function(t){n.onload=t,n.onerror=t,n.src=e})})}}}const i={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1,httpTimeout:3e4,styleCaching:"strict"},l={toSvg:a,toPng:function(t,e){return s(t,e).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return s(t,e).then(function(t){return t.toDataURL("image/jpeg",(e?e.quality:void 0)||1)})},toBlob:function(t,e){return s(t,e).then(f.canvasToBlob)},toPixelData:function(e,t){return s(e,t).then(function(t){return t.getContext("2d").getImageData(0,0,f.width(e),f.height(e)).data})},toCanvas:s,impl:{fontFaces:t,images:n,util:f,inliner:r,urlCache:[],options:{}}},h=("object"==typeof exports&&"object"==typeof module?module.exports=l:u.domtoimage=l,u.getComputedStyle||window.getComputedStyle),c=u.atob||window.atob;function a(o,r){const e=l.impl.util.getWindow(o);var t=r=r||{};return void 0===t.imagePlaceholder?l.impl.options.imagePlaceholder=i.imagePlaceholder:l.impl.options.imagePlaceholder=t.imagePlaceholder,void 0===t.cacheBust?l.impl.options.cacheBust=i.cacheBust:l.impl.options.cacheBust=t.cacheBust,void 0===t.useCredentials?l.impl.options.useCredentials=i.useCredentials:l.impl.options.useCredentials=t.useCredentials,void 0===t.httpTimeout?l.impl.options.httpTimeout=i.httpTimeout:l.impl.options.httpTimeout=t.httpTimeout,void 0===t.styleCaching?l.impl.options.styleCaching=i.styleCaching:l.impl.options.styleCaching=t.styleCaching,Promise.resolve(o).then(function(t){return function l(e,s,r,c){const t=s.filter;if(e===m||f.isHTMLScriptElement(e)||f.isHTMLStyleElement(e)||f.isHTMLLinkElement(e)||null!==r&&t&&!t(e))return Promise.resolve();return Promise.resolve(e).then(n).then(function(t){return i(o(e),t)}).then(function(t){return u(e,t)});function n(t){return f.isHTMLCanvasElement(t)?f.makeImage(t.toDataURL()):t.cloneNode(!1)}function o(t){return f.isElementHostForOpenShadowRoot(t)?t.shadowRoot:t}function i(t,e){const n=i(t);let o=Promise.resolve();if(0!==n.length){const u=h(r(t));f.asArray(n).forEach(function(t){o=o.then(function(){return l(t,s,u,c).then(function(t){t&&e.appendChild(t)})})})}return o.then(function(){return e});function r(t){return f.isShadowRoot(t)?t.host:t}function i(t){return f.isShadowSlotElement(t)?t.assignedNodes():t.childNodes}}function u(c,a){return!f.isElement(a)||f.isShadowSlotElement(c)?Promise.resolve(a):Promise.resolve().then(t).then(e).then(n).then(o).then(function(){return a});function t(){function o(t,e){e.font=t.font,e.fontFamily=t.fontFamily,e.fontFeatureSettings=t.fontFeatureSettings,e.fontKerning=t.fontKerning,e.fontSize=t.fontSize,e.fontStretch=t.fontStretch,e.fontStyle=t.fontStyle,e.fontVariant=t.fontVariant,e.fontVariantCaps=t.fontVariantCaps,e.fontVariantEastAsian=t.fontVariantEastAsian,e.fontVariantLigatures=t.fontVariantLigatures,e.fontVariantNumeric=t.fontVariantNumeric,e.fontVariationSettings=t.fontVariationSettings,e.fontWeight=t.fontWeight}function t(t,e){const n=h(t);n.cssText?(e.style.cssText=n.cssText,o(n,e.style)):(g(s,t,n,r,e),null===r&&(["inset-block","inset-block-start","inset-block-end"].forEach(t=>e.style.removeProperty(t)),["left","right","top","bottom"].forEach(t=>{e.style.getPropertyValue(t)&&e.style.setProperty(t,"0px")})))}t(c,a)}function e(){const l=f.uid();function e(r){const i=h(c,r),u=i.getPropertyValue("content");if(""!==u&&"none"!==u){const e=a.getAttribute("class")||"",n=(a.setAttribute("class",e+" "+l),document.createElement("style"));function t(){const t=`.${l}:`+r,e=(i.cssText?n:o)();return document.createTextNode(t+`{${e}}`);function n(){return`${i.cssText} content: ${u};`}function o(){const t=f.asArray(i).map(e).join("; ");return t+";";function e(t){const e=i.getPropertyValue(t),n=i.getPropertyPriority(t)?" !important":"";return t+": "+e+n}}}n.appendChild(t()),a.appendChild(n)}}[":before",":after"].forEach(function(t){e(t)})}function n(){f.isHTMLTextAreaElement(c)&&(a.innerHTML=c.value),f.isHTMLInputElement(c)&&a.setAttribute("value",c.value)}function o(){f.isSVGElement(a)&&(a.setAttribute("xmlns","http://www.w3.org/2000/svg"),f.isSVGRectElement(a))&&["width","height"].forEach(function(t){const e=a.getAttribute(t);e&&a.style.setProperty(t,e)})}}}(t,r,null,e)}).then(d).then(p).then(function(e){r.bgcolor&&(e.style.backgroundColor=r.bgcolor);r.width&&(e.style.width=r.width+"px");r.height&&(e.style.height=r.height+"px");r.style&&Object.keys(r.style).forEach(function(t){e.style[t]=r.style[t]});let t=null;"function"==typeof r.onclone&&(t=r.onclone(e));return Promise.resolve(t).then(function(){return e})}).then(function(t){return t=t,e=r.width||f.width(o),n=r.height||f.height(o),Promise.resolve(t).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)}).then(f.escapeXhtml).then(function(t){return`<foreignObject width="${e}" height="${n}">${t}</foreignObject>`}).then(function(t){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${n}">${t}</svg>`}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t});var e,n}).then(function(t){return l.impl.urlCache=[],function(){m&&(document.body.removeChild(m),m=null);y&&clearTimeout(y);y=setTimeout(()=>{y=null,E={}},2e4)}(),t})}function s(r,i){return a(r,i=i||{}).then(f.makeImage).then(function(t){var e="number"!=typeof i.scale?1:i.scale,n=function(t,e){var n=document.createElement("canvas");n.width=(i.width||f.width(t))*e,n.height=(i.height||f.height(t))*e,i.bgcolor&&((t=n.getContext("2d")).fillStyle=i.bgcolor,t.fillRect(0,0,n.width,n.height));return n}(r,e),o=n.getContext("2d");return o.mozImageSmoothingEnabled=!1,o.msImageSmoothingEnabled=!1,o.imageSmoothingEnabled=!1,t&&(o.scale(e,e),o.drawImage(t,0,0)),n})}let m=null;function d(n){return t.resolveAll().then(function(t){var e;return""!==t&&(e=document.createElement("style"),n.appendChild(e),e.appendChild(document.createTextNode(t))),n})}function p(t){return n.inlineAll(t).then(function(){return t})}function g(t,e,i,u,n){const l=function(e,t){var t=function(t){var e=Node.ELEMENT_NODE||1,n=[];do{if(t.nodeType===e){var o=t.tagName;if(n.push(o),w.includes(o))break}}while(t=t.parentNode,t);return n}(t),n=function(t){return("relaxed"!==e.styleCaching?t:t.filter((t,e,n)=>0===e||e===n.length-1)).join(">")}(t);if(E[n])return E[n];var o=function(){if(m)return m.contentWindow;var t=document.characterSet||"UTF-8",e=document.doctype,e=e?(`<!DOCTYPE ${n(e.name)} ${n(e.publicId)} `+n(e.systemId)).trim()+">":"";return(m=document.createElement("iframe")).id="domtoimage-sandbox-"+f.uid(),m.style.visibility="hidden",m.style.position="fixed",document.body.appendChild(m),function(t,e,n,o){try{return t.contentWindow.document.write(e+`<html><head><meta charset='${n}'><title>${o}</title></head><body></body></html>`),t.contentWindow}catch(t){}var r=document.createElement("meta");r.setAttribute("charset",n);try{var i=document.implementation.createHTMLDocument(o),u=(i.head.appendChild(r),e+i.documentElement.outerHTML);return t.setAttribute("srcdoc",u),t.contentWindow}catch(t){}return t.contentDocument.head.appendChild(r),t.contentDocument.title=o,t.contentWindow}(m,e,t,"domtoimage-sandbox");function n(t){var e;return t?((e=document.createElement("div")).innerText=t,e.innerHTML):""}}(),t=function(t,e){let n=t.body;do{var o=e.pop(),o=t.createElement(o);n.appendChild(o),n=o}while(0<e.length);return n.textContent="â€‹",n}(o.document,t),o=function(t,e){const n={},o=t.getComputedStyle(e);return f.asArray(o).forEach(function(t){n[t]="width"===t||"height"===t?"auto":o.getPropertyValue(t)}),n}(o,t);return function(t){do{var e=t.parentElement;null!==e&&e.removeChild(t),t=e}while(t&&"BODY"!==t.tagName)}(t),E[n]=o}(t,e),c=n.style;f.asArray(i).forEach(function(t){var e,n=i.getPropertyValue(t),o=l[t],r=u?u.getPropertyValue(t):void 0;(n!==o||u&&n!==r)&&(o=i.getPropertyPriority(t),r=c,n=n,o=o,e=0<=["background-clip"].indexOf(t=t),o?(r.setProperty(t,n,o),e&&r.setProperty("-webkit-"+t,n,o)):(r.setProperty(t,n),e&&r.setProperty("-webkit-"+t,n)))})}let y=null,E={};const w=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","SVG","TABLE","UL","math","svg","BODY","HEAD","HTML"]}(this);
//# sourceMappingURL=dom-to-image-more.min.js.map